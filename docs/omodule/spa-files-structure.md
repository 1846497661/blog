# 如何「简单粗暴」的组织和管理 react 项目中的业务模块和代码文件
### 1、背景
> 随着业务需求增长和迭代，单页面应用项目的代码量和文件数量不断增加。突然有一天，你发现添加一个没有命名冲突的 route 变得很吃力。又或者你项目中使用了 redux，但新增的 reducer 和 action type 的命名让你费尽心思。route 和 redux 模版文件的管理变得越来越混乱。  

**本文讲诉的是使用一种「简单粗暴」的方式来解决大型SPA项目中组织和管理问题的方式。**  

##### `简单`和`粗暴`的定义 ？
> 「简单」：用法简单。  
> 「粗暴」：依赖 babel 编译。  

##### 曾经美好的「多页面」应用

「多页面」应用新增一个需求😊
> 1. `src/businessX/newFeature.html`  新增一个html  

「单页面」应用新增一个需求😢

> 1. `src/businessX/route.js` 新增业务模块子路由  
> 2. `src/businessX/reducer.js` 新增业务模块reducer，当然还有 action type 等 redux 模版  
> 3. `src/businessX/components/` 业务模块相关的组件  
> 4. `src/root/rootRoute.js` 把新增的 route 引入项目的根路由配置表  
> 5. `src/root/rootReducer.js` 把新增的业务reducer引入到项目 root reducer 中  

「单页面应用」相比「多页面应用」，用户体验得到提升。但对于开发体验，「单页面应用」并无优势。  

##### 「单页面应用」和「多页面应用」的开发体验对比
`「单页面应用」的劣势`  
> **1、路由命名**  
> 单页面应用：开发**需**考虑  
> 多页面应用：开发**无需**考虑，文件路径即为页面路由  
> **2、子路由管理**  
> 单页面应用：开发**需**考虑，业务子路由需要import到项目路由配置表中  
> 多页面应用：开发**无需**考虑  

> **3、数据层命名空间**  
> 单页面应用：开发**需**考虑  
> 多页面应用：开发**基本无需**考虑，每个页面都是单独的运行环境，数据层命名冲突可能性低  

`引入 Redux 后带来更多问题`

> 1、每个业务模块 reducer 的命名空间  
> 2、Action Type 命名空间  
> 3、每个业务模块用到的 reducer 需要 import 到项目中  

### 2、问题分析

> 1、命名空间问题：路由命名空间，数据层命名空间（reducer，action type）  
> 2、业务模块导入问题：每个业务模块路由或者 reducer 都要手动引入到总的项目配置文件中。  

### 3、目标
**「单页面应用」和「多页面应用」有相同的开发体验。**  

「多页面」应用新增一个需求😊

> 1. `src/businessX/newFeature.html`  新增一个html  

「单页面」应用新增一个需求😊

> 1. `src/businessX/`  新增一个`业务模块文件目录`。  

`业务模块文件目录`中包含所有业务模块代码，无需担心命名空间问题。

## todo
